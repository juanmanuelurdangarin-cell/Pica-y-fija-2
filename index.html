<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pica y Fija</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    overflow: hidden;
}

.screen {
    width: 100vw;
    height: 100vh;
    position: absolute;
    transition: transform 0.5s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 40px;
    box-sizing: border-box;
    color: white;
}

#screen1 {
    background: linear-gradient(135deg, #ff512f, #dd2476);
}

#screen2 {
    background: linear-gradient(135deg, #8e2de2, #ff6a00);
    transform: translateX(100%);
}

button {
    padding: 10px 20px;
    margin: 5px;
    border: none;
    border-radius: 8px;
    background: #ffd700;
    font-weight: bold;
}

input {
    padding: 8px;
    font-size: 18px;
    text-align: center;
    width: 120px;
}

#menu {
    position: absolute;
    top: 10px;
    right: 10px;
}

.hidden {
    display: none;
}

#history {
    max-height: 200px;
    overflow-y: auto;
    margin-top: 10px;
}
</style>
</head>

<body>

<!-- Pantalla inicial -->
<div id="startScreen" class="screen" style="background: linear-gradient(135deg,#ff9966,#ff5e62);">
    <h2>Elegí tu número</h2>
    <input id="myNumberInput" maxlength="4" placeholder="0000">
    <br>
    <label>Intentos:</label>
    <select id="attemptLimit">
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="0">Sin límite</option>
    </select>
    <br><br>
    <button onclick="startGame()">Aceptar</button>
</div>

<!-- Pantalla 1 -->
<div id="screen1" class="screen">
    <div id="menu">
        <button onclick="toggleHistory()">Historial</button>
        <button onclick="goToScreen2()">➡</button>
    </div>

    <h2>Tu número: <span id="myNumber">****</span></h2>
    <button onclick="toggleNumber()">Mostrar/Ocultar</button>

    <h3>Intento al rival</h3>
    <input id="guess1" maxlength="4" placeholder="0000">
    <input id="fijas1" placeholder="F">
    <input id="picas1" placeholder="P">
    <button onclick="addHistory1()">Guardar</button>

    <div id="history" class="hidden"></div>
</div>

<!-- Pantalla 2 -->
<div id="screen2" class="screen">
    <div id="menu">
        <button onclick="goToScreen1()">⬅</button>
    </div>

    <h2>Tu número: <span id="myNumber2">****</span></h2>
    <button onclick="toggleNumber()">Mostrar/Ocultar</button>

    <h3>Número del rival</h3>
    <input id="guess2" maxlength="4" placeholder="0000" oninput="calculate()">
    <h3 id="result"></h3>
</div>

<script>

let myNumber = "";
let attempts = 0;
let limit = 0;
let numberVisible = false;

function startGame() {
    let input = document.getElementById("myNumberInput").value;
    if (input.length !== 4 || isNaN(input)) {
        alert("Debe ser un número de 4 cifras");
        return;
    }

    myNumber = input;
    limit = parseInt(document.getElementById("attemptLimit").value);
    document.getElementById("startScreen").style.display = "none";
    document.getElementById("screen1").style.transform = "translateX(0)";
    document.getElementById("screen2").style.transform = "translateX(100%)";
    updateNumberDisplay();
}

function toggleNumber() {
    numberVisible = !numberVisible;
    updateNumberDisplay();
}

function updateNumberDisplay() {
    let display = numberVisible ? myNumber : "****";
    document.getElementById("myNumber").innerText = display;
    document.getElementById("myNumber2").innerText = display;
}

function goToScreen2() {
    document.getElementById("screen1").style.transform = "translateX(-100%)";
    document.getElementById("screen2").style.transform = "translateX(0)";
}

function goToScreen1() {
    document.getElementById("screen1").style.transform = "translateX(0)";
    document.getElementById("screen2").style.transform = "translateX(100%)";
}

function addHistory1() {
    let guess = document.getElementById("guess1").value;
    let f = document.getElementById("fijas1").value;
    let p = document.getElementById("picas1").value;

    if (guess.length !== 4) return;

    let div = document.createElement("div");
    div.innerText = guess + " → Fijas: " + f + " | Picas: " + p;
    document.getElementById("history").appendChild(div);

    attempts++;
}

function toggleHistory() {
    document.getElementById("history").classList.toggle("hidden");
}

function calculate() {
    let guess = document.getElementById("guess2").value;
    if (guess.length !== 4) return;

    let fijas = 0;
    let picas = 0;

    let usedMy = [false,false,false,false];
    let usedGuess = [false,false,false,false];

    for (let i = 0; i < 4; i++) {
        if (guess[i] === myNumber[i]) {
            fijas++;
            usedMy[i] = true;
            usedGuess[i] = true;
        }
    }

    for (let i = 0; i < 4; i++) {
        if (usedGuess[i]) continue;
        for (let j = 0; j < 4; j++) {
            if (!usedMy[j] && guess[i] === myNumber[j]) {
                picas++;
                usedMy[j] = true;
                break;
            }
        }
    }

    document.getElementById("result").innerText =
        "Fijas: " + fijas + " | Picas: " + picas;

    if (fijas === 4) {
        alert("¡Ganaron!");
    }
}

</script>
</body>
</html>
