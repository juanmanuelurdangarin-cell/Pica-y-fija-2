<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pica y Fija</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Arial, sans-serif;
}

body{
  background:#111;
}

/* Fondo decorativo */
.decoracion{
  position:fixed;
  width:100%;
  height:100%;
  z-index:-1;
  pointer-events:none;
}

.numero-bg{
  position:absolute;
  opacity:0.05;
  font-weight:bold;
  color:white;
}

/* Pantallas */
.pantalla{
  min-height:100vh;
  display:none;
  flex-direction:column;
  align-items:center;
  padding:20px;
  overflow-y:auto;
}

.activa{
  display:flex;
}

.pantalla > *{
  width:100%;
  max-width:500px;
}

.menu{
  background:linear-gradient(135deg,#ff512f,#f09819);
  color:white;
  justify-content:center;
  text-align:center;
}

.turno1{
  background:linear-gradient(135deg,#36d1dc,#5b86e5);
  color:white;
}

.turno2{
  background:linear-gradient(135deg,#ff9966,#ff5e62);
  color:white;
}

h1{
  margin-bottom:15px;
  text-align:center;
}

input{
  margin-top:12px;
  padding:14px;
  font-size:18px;
  border:none;
  border-radius:8px;
  text-align:center;
  width:100%;
}

button{
  margin-top:14px;
  padding:12px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:#ffd200;
  cursor:pointer;
}

.nav{
  margin-top:20px;
}

.historial{
  margin-top:20px;
  width:100%;
}

.item{
  background:rgba(255,255,255,0.2);
  padding:10px;
  margin-top:8px;
  border-radius:6px;
  text-align:center;
}

/* N√∫mero secreto */
.secreto-box{
  margin-bottom:15px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
}

.secreto-box button{
  margin-left:10px;
  padding:5px 10px;
  font-size:14px;
}

/* Bot√≥n finalizar */
.finalizar-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#222;
  color:white;
  z-index:5;
  padding:12px 18px;
  display:none;
}

/* Modal */
.modal{
  position:fixed;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}

.modal-content{
  background:white;
  padding:25px;
  border-radius:10px;
  text-align:center;
  width:90%;
  max-width:400px;
}

.rojo{
  color:red;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="decoracion" id="decoracion"></div>

<!-- MENU -->
<div class="pantalla menu activa" id="menu">
  <h1>üéØ PICA Y FIJA</h1>
  <p>Eleg√≠ tu n√∫mero secreto</p>
  <input type="tel" id="numeroJugador" maxlength="4" placeholder="0000">
  <button id="btnAceptar">Aceptar</button>
</div>

<!-- PANTALLA 1 -->
<div class="pantalla turno1" id="pantalla1">

  <div class="secreto-box">
    <span id="mostrarNumero1">‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
    <button onclick="toggleNumero()">Mostrar</button>
  </div>

  <h1>Tu Turno</h1>

  <input type="tel" id="intentoJugador" maxlength="4" placeholder="N√∫mero que intent√°s">
  <input type="number" id="picasManual" min="0" max="4" placeholder="Picas">
  <input type="number" id="fijasManual" min="0" max="4" placeholder="Fijas">
  <button onclick="agregarIntentoJugador()">Guardar Intento</button>

  <div class="historial" id="historial1"></div>

  <div class="nav">
    <button onclick="mostrarPantalla(2)">Ir a Turno Rival ‚Üí</button>
  </div>
</div>

<!-- PANTALLA 2 -->
<div class="pantalla turno2" id="pantalla2">

  <div class="secreto-box">
    <span id="mostrarNumero2">‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
    <button onclick="toggleNumero()">Mostrar</button>
  </div>

  <h1>Turno Rival</h1>

  <input type="tel" id="intentoRival" maxlength="4" placeholder="N√∫mero que dicen">
  <button onclick="calcular()">Calcular</button>

  <div class="historial" id="historial2"></div>

  <div class="nav">
    <button onclick="mostrarPantalla(1)">‚Üê Ir a Tu Turno</button>
  </div>
</div>

<button class="finalizar-btn" id="btnFinalizar">Finalizar Juego</button>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content">
    <p>¬øEst√°s seguro que deseas finalizar esta partida?</p>
    <button onclick="cerrarModal()">No</button>
    <button class="rojo" onclick="finalizar()">SI</button>
  </div>
</div>

<script>
let numeroSecreto="";
let numeroVisible=false;

const inputNumero=document.getElementById("numeroJugador");
const btnAceptar=document.getElementById("btnAceptar");
const btnFinalizar=document.getElementById("btnFinalizar");

/* ENTER = aceptar */
inputNumero.addEventListener("keydown",function(e){
  if(e.key==="Enter") iniciarJuego();
});

btnAceptar.addEventListener("click",iniciarJuego);
btnFinalizar.addEventListener("click",abrirModal);

function iniciarJuego(){
  const num=inputNumero.value;
  if(num.length!==4){
    alert("El n√∫mero debe tener 4 cifras");
    return;
  }
  numeroSecreto=num;
  numeroVisible=false;

  document.getElementById("mostrarNumero1").innerText="‚Ä¢‚Ä¢‚Ä¢‚Ä¢";
  document.getElementById("mostrarNumero2").innerText="‚Ä¢‚Ä¢‚Ä¢‚Ä¢";

  document.getElementById("menu").classList.remove("activa");
  document.getElementById("pantalla1").classList.add("activa");

  btnFinalizar.style.display="block";
}

function mostrarPantalla(num){
  document.getElementById("pantalla1").classList.remove("activa");
  document.getElementById("pantalla2").classList.remove("activa");
  document.getElementById("pantalla"+num).classList.add("activa");
}

function toggleNumero(){
  numeroVisible=!numeroVisible;

  const texto=numeroVisible?numeroSecreto:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢";
  const botonTexto=numeroVisible?"Ocultar":"Mostrar";

  document.getElementById("mostrarNumero1").innerText=texto;
  document.getElementById("mostrarNumero2").innerText=texto;

  document.querySelectorAll(".secreto-box button")
    .forEach(b=>b.innerText=botonTexto);
}

function agregarIntentoJugador(){
  const num=document.getElementById("intentoJugador").value;
  let p=parseInt(document.getElementById("picasManual").value)||0;
  let f=parseInt(document.getElementById("fijasManual").value)||0;

  if(num.length!==4){
    alert("El n√∫mero debe tener 4 cifras");
    return;
  }

  if(p<0||f<0||p>4||f>4||p+f>4){
    alert("Valores inv√°lidos (0-4 y suma m√°xima 4)");
    return;
  }

  const div=document.createElement("div");
  div.className="item";
  div.innerText=num+" ‚Üí "+p+"P "+f+"F";
  document.getElementById("historial1").appendChild(div);

  if(f===4){
    alert("üéâ FELICITACIONES! Adivinaste el n√∫mero üéâ");
  }

  document.getElementById("intentoJugador").value="";
  document.getElementById("picasManual").value="";
  document.getElementById("fijasManual").value="";
}

function calcular(){
  const intento=document.getElementById("intentoRival").value;
  if(intento.length!==4) return;

  let fijas=0,picas=0;
  let usadoSecreto=[false,false,false,false];
  let usadoIntento=[false,false,false,false];

  for(let i=0;i<4;i++){
    if(intento[i]===numeroSecreto[i]){
      fijas++;
      usadoSecreto[i]=true;
      usadoIntento[i]=true;
    }
  }

  for(let i=0;i<4;i++){
    if(usadoIntento[i]) continue;
    for(let j=0;j<4;j++){
      if(!usadoSecreto[j]&&intento[i]===numeroSecreto[j]){
        picas++;
        usadoSecreto[j]=true;
        break;
      }
    }
  }

  const div=document.createElement("div");
  div.className="item";
  div.innerText=intento+" ‚Üí "+picas+"P "+fijas+"F";
  document.getElementById("historial2").appendChild(div);

  if(fijas===4){
    alert("Lo sentimos, perdiste. Adivinaron tu n√∫mero.");
  }

  document.getElementById("intentoRival").value="";
}

function abrirModal(){
  document.getElementById("modal").style.display="flex";
}

function cerrarModal(){
  document.getElementById("modal").style.display="none";
}

function finalizar(){
  cerrarModal();
  numeroSecreto="";
  numeroVisible=false;

  inputNumero.value="";
  document.getElementById("historial1").innerHTML="";
  document.getElementById("historial2").innerHTML="";

  document.getElementById("pantalla1").classList.remove("activa");
  document.getElementById("pantalla2").classList.remove("activa");
  document.getElementById("menu").classList.add("activa");

  btnFinalizar.style.display="none";
}

function crearDecoracion(){
  const cont=document.getElementById("decoracion");
  for(let i=0;i<30;i++){
    const span=document.createElement("span");
    span.className="numero-bg";
    span.innerText=Math.floor(Math.random()*10);
    span.style.fontSize=(Math.random()*120+40)+"px";
    span.style.top=Math.random()*100+"%";
    span.style.left=Math.random()*100+"%";
    cont.appendChild(span);
  }
}
crearDecoracion();
</script>

</body>
</html>
